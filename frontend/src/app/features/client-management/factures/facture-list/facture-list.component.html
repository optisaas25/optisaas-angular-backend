<div class="facture-list-container">
    <div class="header-actions">
        <h2>Factures & Devis</h2>
        <button mat-raised-button color="primary" [routerLink]="['/client-management/factures/new']"
            [queryParams]="{ clientId: clientId }">
            <mat-icon>add</mat-icon>
            Nouveau Document
        </button>
    </div>

    <div class="modern-table-container">
        <table>
            <thead>
                <tr>
                    <th>Numéro</th>
                    <th>Type</th>
                    <th>Date</th>
                    <th>Client</th>
                    <th>Statut</th>
                    <th>Total TTC</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let facture of dataSource.data">
                    <td>{{ facture.numero }}</td>
                    <td>
                        <span class="badge" [ngClass]="'badge-' + facture.type.toLowerCase()">
                            {{ facture.type }}
                        </span>
                    </td>
                    <td>{{ facture.dateEmission | date:'dd/MM/yyyy' }}</td>
                    <td>{{ facture.client?.nom }} {{ facture.client?.prenom }}</td>
                    <td>
                        <span class="badge" [ngClass]="'badge-' + facture.statut.toLowerCase()">
                            {{ facture.statut }}
                        </span>
                    </td>
                    <td>{{ facture.totalTTC | number:'1.2-2' }} DH</td>
                    <td>
                        <button mat-icon-button [matMenuTriggerFor]="menu" class="action-menu-trigger">
                            <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #menu="matMenu">
                            <button mat-menu-item [routerLink]="['/p/clients/factures', facture.id]">
                                <mat-icon>visibility</mat-icon>
                                <span>Voir</span>
                            </button>
                            <button mat-menu-item [routerLink]="['/p/clients/factures', facture.id]">
                                <mat-icon>edit</mat-icon>
                                <span>Modifier</span>
                            </button>
                            <button mat-menu-item>
                                <mat-icon>print</mat-icon>
                                <span>Imprimer</span>
                            </button>
                        </mat-menu>
                    </td>
                </tr>
            </tbody>
        </table>

        <!-- Empty State -->
        <div class="empty-state" *ngIf="!dataSource.data || dataSource.data.length === 0">
            <mat-icon>receipt_long</mat-icon>
            <h3>Aucune facture</h3>
            <p>Créez votre première facture pour commencer</p>
        </div>
    </div>
</div>